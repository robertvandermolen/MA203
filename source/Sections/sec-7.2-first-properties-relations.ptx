<?xml version="1.0" encoding="UTF-8"?>

<section xml:id="sec-7-2-first-properties-of-relations" xmlns:xi="http://www.w3.org/2001/XInclude">
  <title>New Relations From Old</title>

  
    <p>
        This subsection is dedicated to making new relations from old ones. Our first method is by <em>turning around</em> the arrows.
    </p>
    <definition xml:id="def-inverse">
        <title>Inverse</title>
        <idx><h>inverse</h></idx>
        <idx><h>relation</h><h>inverse</h></idx>
        <statement>
            <p>
                If <m>R</m> is a relation from <m>A</m> to <m>B</m>, then the inverse of <m>R</m> is the relation
                <me>R^{-1} = \{(y,x) \text{ }|\text{ } (x,y)\in R\}</me>
            </p>
        </statement>
    </definition>
    <example>
        <p>
            We will consdier the same sets and realtion as in <xref ref="ex-dom"/>. The inverse is thus
            <me>
                R^{-1}=\{(a,3),(b,1),(d,4),(e,4)\}
            </me>
            which can be visualized as
        </p>
        <image source="/images/inverse_egg.jpeg" width="80%"/>
        <p>
            Notice we have the following domain and range
            <me>
                \text{Dom}(R^{-1})=\{a,b,d,e\}
            </me>
            <me>
                \text{Rng}(R^{-1})=\{1,3,4\}
            </me>
            
        </p>
    </example>
    <p>
        This next construction is one that may be familiar from your college algebra.
    </p>
    <definition xml:id="def-composition">
        <title>Composite</title>

        <statement>
            <p>
               Let <m>R</m> be a relation from <m>A</m> to <m>B</m>, and let <m>S</m> be a relation from <m>B</m> to <m>C</m>.
               The composite of <m>R</m> and <m>S</m> is <me>S\circ R = \{(a,c)\text{ } |\text{ } \exists b \in B \text{ such that } (a,b)\in R \text{ and } (b,c) \in S\}</me>
            </p>
        </statement>
    </definition>
    <example>
        <p>
            For this example consider again the sets
            <me>
                A=\{1,2,3,4,5\}
            </me>
            and 
            <me>
                B=\{a,b,c,d,e\}
            </me>
            but in addition consider the set
        </p>
        <image source="/images/the_c.jpeg" width="62%"/>
        <p>
            and define the relation <m>R</m> from <m>A</m> to <m>B</m> as
            <me>
                R=\{(1,c),(2,a),(3,e),(4,a),(4,d)\}
            </me>
            and define the relation <m>S</m> from <m>B</m> to <m>C</m> as
        </p>
             <image source="/images/s_relation.jpeg" width="62%"/>
        <p>
            Thus we can visulaize the composition as
        </p>
        <image source="/images/s_circ_r.jpeg" width="100%"/>
        <p>
            and the relation is thus defined as
        </p>
        <image source="/images/s_circ_r_def.jpeg" width="62%"/>
        <p>
            Notice we have the following domain and range of the composition 
            <me>
                \text{Dom}(S\circ R)=\{1,2,3,4\}
            </me>
            
        </p>
        <image source="/images/rng_s_circ_r.jpeg" width="62%"/>
    </example>
  <p>
    Now lets see a couple of properties and proofs to accompany
  </p>
  <proposition xml:id="prop-dom-inverse">
    <statement>
        <p>
            Let <m>R</m> be a relation from <m>A</m> to <m>B</m>
            <ol marker="(a)">
                <li>
                    <p>
                        <m>\text{Dom}(R^{-1})=\text{Rng}(R)</m>
                    </p>
                </li>
                <li>
                    <p>
                        <m>\text{Rng}(R^{-1})=\text{Dom}(R)</m>
                    </p>
                </li>
            </ol>
        </p>
    </statement>
  </proposition>
  <p>
    <proof>
        <title>Proof of <xref ref="prop-dom-inverse"/></title>
        <p>
            We will prove part (a) and leave part (b) as an exercise to the reader
        </p>
         <p>
        Let <m>R</m> be a relation from <m>A</m> to <m>B</m>.
    </p>
    <p> 
        <alert>Prove:</alert> Dom(<m>R^{-1}</m>) = Rng(<m>R</m>)</p>
    <p>
        Don't forget, to prove equality of sets, you must prove both subsets!
    </p>
    <p>
        <m>\mathbf{\text{Proof of }\text{Dom}(R^{-1})\subseteq\text{Rng}(R^{-1}):}</m> 
    </p>
    <p>
        Let <m>a \in \text{dom}(R^{-1})</m>. Hence by definition of domain, we can find <m>b\in B</m> such that <m>aR^{-1}b</m>.
        Hence, by definition of inverse, <m>bRa</m>. Since <m>b\in B</m>, by definition of range, <m>a\in \text{rng}(R)</m>.
    </p>
    <p>
        <m>\mathbf{\text{Proof of }\text{Dom}(R^{-1})\supseteq\text{Rng}(R^{-1}):}</m>
    </p>
    <p>
        Let <m>a \in \text{dom}(R^{-1})</m>. Hence, by definition of domain, we can find <m>b \in B</m> such that <m>aR^{-1}b</m>.
        Hence, by definition of inverse, <m>bRa</m>. Since <m>b\in B</m>, by definition of range, <m>a\in \text{Rng}(R)</m>.
    </p>
    </proof>
  </p>
<example>
    <p>
        number example where you make them prove so their head doesn't explode...
    </p>
    <p>
        <proof>
            <p>
                blah...
            </p>
        </proof>
    </p>
</example>
<definition xml:id="def-identity">
        <title>Identity Relation</title>
        <idx><h>identity</h></idx>
        <idx><h>relation</h><h>identity</h></idx>
        <statement>
            <p>
                For any set <m>A</m>, the identity relation on <m>A</m> is the set <m>I_A = \{(a,a) | a\in A\}</m>
            </p>
        </statement>
    </definition>
<proposition xml:id="prop-comp-inv">
    <statement>
        <p>
            Let <m>A</m>, <m>B</m>, <m>C</m> and <m>D</m> be sets. Let <m>R</m> be a realtion from <m>A</m> to <m>B</m>, <m>S</m> a relation from <m>B</m> to <m>C</m>, and <m>T</m> be a relation from <m>C</m> to <m>D</m>
            <ol marker="(a)">
                <li>
                    <p>
                        <m>\left(R^{-1}\right)^{-1}=R</m>
                    </p>
                </li>
                <li>
                    <p>
                        <m>T\circ(S\circ R)=(T\circ S)\circ R</m> (composition is associative)
                    </p>
                </li>
                <li>
                    <p>
                        <m>I_B\circ R=R</m> and <m>R\circ I_A=R</m>
                    </p>
                </li>
                <li>
                    <p>
                        <m>(S\circ R)^{-1}=R^{-1}\circ S^{-1}</m>
                    </p>
                </li>
            </ol>
        </p>
    </statement>
</proposition>
<p>
    <proof>
        <title>Proof of <xref ref="prop-comp-inv"/></title>
        <p>
            Suppose that <m>A, B, C, \text{ and } D</m> are sets. Let <m>R</m> be a relation from
            <m>A \text{ to } B</m>, <m>S</m> be a relation from <m>B \text{ to } C</m>, and <m>T</m>
            be a realtion from <m>C\text { to } D</m>.
        </p>
        <p>
            Since we are proving an equality, we will have to prove both subsets. In this case, the first 
            subset we want to show is that <m>T\circ (S\circ R)\subset A\times D</m>
        </p>
        <p>
            [<m>\subset</m>]
        </p>
        <p>
            Let <m>(x,y)\in T\circ (S\circ R)</m> <alert>NOTE (this is super important to remember and not mix up): <m>(x,y)</m> is an 
            <em>ordered pair</em>.</alert> By definition of composition, we can find <m>z\in C</m> such that <m>(z,y)\in T</m>
            and <m>(x,z)\in (S\circ R)</m>. Thus by definition of composition, we can find <m>w\in B</m> such that 
            <m>(x,w)\in R \text{ and } (w,z)\in S</m>.
        </p>
        <p>
            Since <m>z\in C \text{ and } (z,y)\in T, \text{ and } (w,z)\in S</m> then <m>(w,y)\in (T\circ S)</m>. And since <m>w\in B \text{ and }
                (x,w)\in R</m>, then <m>(x,y)\in (T\circ S)\circ R</m>
        </p>
    </proof>
</p>
</section>